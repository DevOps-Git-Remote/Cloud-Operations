# **ğŸ”· AWS Systems Manager (SSM) â€“ A Complete Guide**  

## **ğŸ“Œ What is AWS Systems Manager?**  
AWS **Systems Manager (SSM)** is a **unified management service** that helps automate operational tasks, manage configurations, 
and improve security across **EC2 instances, on-premises servers, and hybrid environments**.  

âœ… **Automates Patching & Configuration Management**  
âœ… **Provides Secure Access via Session Manager (No SSH/RDP Needed)**  
âœ… **Monitors & Troubleshoots Instances with Run Command & State Manager**  
âœ… **Tracks Inventory & Compliance with AWS Config & Systems Manager Inventory**  
âœ… **Enables Secure Remote Access via AWS CloudShell & Session Manager**  

---

## **ğŸ”¹ Core Features of AWS Systems Manager**
| **Feature** | **Description** |
|------------|---------------|
| **Session Manager** | Securely access EC2 instances **without SSH or RDP**. |
| **Run Command** | Execute remote commands **without logging into instances**. |
| **Patch Manager** | Automate **OS & application patching**. |
| **State Manager** | Automate **configuration enforcement**. |
| **Inventory** | Collect & view **instance metadata** (software, OS, updates). |
| **Automation** | Define **runbooks** to automate complex IT workflows. |
| **Parameter Store** | Securely store **secrets, passwords, & configurations**. |
| **Compliance & Security** | Monitor **security compliance & audit logs**. |

---

# **1ï¸âƒ£ AWS SSM Agent â€“ The Heart of Systems Manager**
**SSM Agent** is a lightweight software **installed on EC2 instances, on-prem servers, and VMs** that allows AWS Systems Manager to manage them.

### **ğŸ”¹ How to Install & Start the SSM Agent**
**For Amazon Linux & Ubuntu:**
```bash
sudo yum install -y amazon-ssm-agent
sudo systemctl start amazon-ssm-agent
sudo systemctl enable amazon-ssm-agent
```

**For Windows:**
```powershell
Start-Service AmazonSSMAgent
Set-Service -Name AmazonSSMAgent -StartupType Automatic
```

### **ğŸ”¹ How to Check SSM Agent Status**
```bash
sudo systemctl status amazon-ssm-agent
```

---

# **2ï¸âƒ£ Secure Remote Access with Session Manager**
Session Manager provides **secure shell access** to EC2 instances **without SSH or RDP**.

### **ğŸ”¹ Benefits of Session Manager**
âœ”ï¸ **No Open Ports** â€“ Eliminates security risks from SSH/RDP.  
âœ”ï¸ **IAM-Based Access** â€“ No need for private keys or passwords.  
âœ”ï¸ **Audit Logging** â€“ Logs all session activities to **AWS CloudTrail**.  
âœ”ï¸ **Supports Port Forwarding** â€“ Enables secure tunneling for apps.  

### **ğŸ”¹ Start a Session Using AWS CLI**
```bash
aws ssm start-session --target i-0abcdef1234567890
```

### **ğŸ”¹ Enable Port Forwarding (Example for Web App on Port 8080)**
```bash
aws ssm start-session --target i-0abcdef1234567890 --document-name AWS-StartPortForwardingSession --parameters portNumber=8080,localPortNumber=9090
```

---

# **3ï¸âƒ£ Automate Command Execution with Run Command**
AWS **Run Command** allows you to execute scripts **on multiple instances** simultaneously **without logging in**.

### **ğŸ”¹ Use Cases**
âœ”ï¸ **Update Software & Patch Systems**  
âœ”ï¸ **Restart Services**  
âœ”ï¸ **Run Security Scans**  

### **ğŸ”¹ Example: Running a Shell Command on an EC2 Instance**
```bash
aws ssm send-command --document-name "AWS-RunShellScript" \
    --targets "Key=instanceIds,Values=i-0abcdef1234567890" \
    --parameters 'commands=["df -h"]'
```

### **ğŸ”¹ Example: Running a PowerShell Command on a Windows Instance**
```bash
aws ssm send-command --document-name "AWS-RunPowerShellScript" \
    --targets "Key=instanceIds,Values=i-0abcdef1234567890" \
    --parameters 'commands=["Get-Service"]'
```

---

# **4ï¸âƒ£ Patch Manager â€“ Automate Patch Management**
AWS **Patch Manager** automates **patching** of EC2 instances **for security updates & compliance**.

### **ğŸ”¹ Steps to Configure Patch Manager**
1ï¸âƒ£ Define a **Patch Baseline** (Windows/Linux).  
2ï¸âƒ£ Assign an **IAM Role** to allow patching.  
3ï¸âƒ£ Schedule patching using **AWS Systems Manager Maintenance Window**.  

### **ğŸ”¹ Example: Apply Patches on EC2 Instances**
```bash
aws ssm create-association \
    --name "AWS-RunPatchBaseline" \
    --targets "Key=instanceIds,Values=i-0abcdef1234567890"
```

---

# **5ï¸âƒ£ State Manager â€“ Maintain Configuration Compliance**
AWS **State Manager** enforces **consistent system configurations** across instances.

âœ”ï¸ **Ensure correct settings (Firewall, SSH, Services, etc.)**  
âœ”ï¸ **Auto-remediate configuration drifts**  

### **ğŸ”¹ Example: Enforcing a Configuration on EC2**
```bash
aws ssm create-association \
    --name "AWS-ApplyPatchBaseline" \
    --targets "Key=instanceIds,Values=i-0abcdef1234567890"
```

---

# **6ï¸âƒ£ Collect & Analyze Inventory Data**
AWS **SSM Inventory** collects **software, OS versions, and application details**.

### **ğŸ”¹ Enable Inventory on EC2**
```bash
aws ssm create-association --name "AWS-GatherSoftwareInventory" \
    --targets "Key=instanceIds,Values=i-0abcdef1234567890"
```

### **ğŸ”¹ View Inventory Data**
```bash
aws ssm list-inventory-entries --instance-id i-0abcdef1234567890
```

---

# **7ï¸âƒ£ Automate Repetitive Tasks with AWS Automation**
AWS **Automation** lets you create **runbooks** to automate complex tasks.

âœ”ï¸ **Automate Backup Creation**  
âœ”ï¸ **Automate EC2 Instance Recovery**  
âœ”ï¸ **Automate Security Fixes**  

### **ğŸ”¹ Example: Restart an EC2 Instance**
```bash
aws ssm start-automation-execution --document-name "AWS-RestartEC2Instance" \
    --parameters "InstanceId=i-0abcdef1234567890"
```

---

# **8ï¸âƒ£ AWS Systems Manager Parameter Store**
AWS **Parameter Store** securely **stores secrets, passwords, and configurations**.

### **ğŸ”¹ Create a Secure Parameter**
```bash
aws ssm put-parameter --name "DBPassword" --value "SecurePass123" --type "SecureString"
```

### **ğŸ”¹ Retrieve a Secure Parameter**
```bash
aws ssm get-parameter --name "DBPassword" --with-decryption
```

---

# **9ï¸âƒ£ AWS Systems Manager Compliance & Security**
AWS **Compliance** tracks whether EC2 instances meet security & patching policies.

### **ğŸ”¹ Check Compliance Status**
```bash
aws ssm list-compliance-summaries
```

âœ”ï¸ **Identify non-compliant instances**  
âœ”ï¸ **Generate security reports**  

---

# **ğŸ”Ÿ Logging & Monitoring with AWS Systems Manager**
âœ”ï¸ **Log all actions using AWS CloudTrail**  
âœ”ï¸ **Send logs to Amazon CloudWatch**  

### **ğŸ”¹ Enable Session Logging to CloudWatch**
```bash
aws ssm update-document \
    --name "SSM-SessionManagerRunShell" \
    --content '{"CloudWatchOutputConfig": {"CloudWatchLogGroupName": "SSM-Logs"}}'
```

---

## **ğŸ“Œ Summary â€“ Why Use AWS Systems Manager?**
| **Feature** | **Benefit** |
|------------|------------|
| **Session Manager** | Secure, SSH-less access to EC2 |
| **Run Command** | Execute commands remotely |
| **Patch Manager** | Automate patching & updates |
| **State Manager** | Enforce configuration policies |
| **Inventory** | Track instance metadata |
| **Automation** | Automate EC2 tasks |
| **Parameter Store** | Securely store secrets & configurations |
| **Logging & Compliance** | Ensure security & audit readiness |

---

## **ğŸš€ Next Steps**
Would you like a **step-by-step lab** to practice AWS Systems Manager features? ğŸ˜Š
